!function(){"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(){var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var r=n.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t}(),e.p;const t=document.createElement("div");t.className="container",document.body.prepend(t);const n=document.createElement("div");n.className="block-settings",t.append(n);const r=document.createElement("div");r.className="block-game",t.append(r);const o=document.createElement("div");o.className="block-info",t.append(o);let s={number:0,get current(){return this.number},set current(e){this.number=e}},a=0===localStorage.length;s.current=a?16:Number(localStorage.getItem("defaultSize"))*Number(localStorage.getItem("defaultSize"));const i={item:[],get node(){return this.item},set node(e){this.item=e}},c={item:[],get list(){return this.item},set list(e){this.list=e}};function l(e){for(let t=1;t<=e;t++){const e=document.createElement("div");e.className="button-game",e.innerHTML=`${t}`,i.node.push(e),c.item.push(Number(e.textContent)),r.append(e)}}function m(e){e.forEach((e=>{e.style.width=100/Number(localStorage.getItem("defaultSize"))+"%",e.style.height=`${Math.floor(100/Number(localStorage.getItem("defaultSize")))}%`}))}l(s.current),m(i.item);const u=document.createElement("div");u.className="button-shuffle",u.innerHTML="Shuffle",n.append(u);const d=document.createElement("div");d.className="button-reset",d.innerHTML="Reset",n.append(d);const g=document.createElement("div");g.className="moves-counter",g.innerHTML="Moves: 0",o.append(g);const f=document.createElement("div");f.classList="time-game",f.innerHTML="0:00",o.append(f);const v=document.createElement("div");v.classList="block-size-game",n.append(v);const h=[],S=[];for(let e=0;e<6;e++){const t=document.createElement("div");t.className="button-size",t.innerHTML=`${e+3}X${e+3}`,h.push(t),S.push(e+3),v.append(t)}const p=document.createElement("audio");p.setAttribute("src","./audio.mp3"),p.classList="audio-game",o.append(p);const b=document.createElement("div");b.classList="button-audio",b.innerHTML="Off",n.append(b);const x=document.createElement("div");function I(e){let t=Number(localStorage.getItem("defaultSize")),n=0,r=[],o=[];return e.forEach((e=>{n<t&&(o.push(e),n++),n===t&&(n=0,r.push(o),o=[])})),r}x.classList="won-message",r.append(x),0===localStorage.length&&(localStorage.setItem("time","0:00"),localStorage.setItem("move",0),localStorage.setItem("seconds",0),localStorage.setItem("minutes",0),localStorage.setItem("saveMatrix",c.item),localStorage.setItem("defaultSize",4));let L={matrix:I(localStorage.getItem("saveMatrix").split(",").map((e=>Number(e)))),get valueMatrix(){return this.valueMatrix},set valueMatrix(e){this.matrix=e}};function M(e){for(let o=0;o<e.length;o++)for(let s=0;s<e[o].length;s++){const a=e[s][o];t=i.node[a-1],n=o,r=s,t.style.transform=`translate3D(${100*n}%,${100*r}%,0)`}var t,n,r}i.node[L.matrix.flat().length-1].style.display="none",M(L.matrix);let T=!1;b.addEventListener("click",(()=>{T?(T=!1,b.innerHTML="Off"):(T=!0,b.innerHTML="On")}));let N={minutes:Number(localStorage.getItem("minutes")),get currentMinute(){return this.minutes},set currentMinute(e){this.minutes=e}},E={seconds:Number(localStorage.getItem("seconds")),get currentSecond(){return this.seconds},set currentSecond(e){this.seconds=e}},z={time:localStorage.getItem("time"),get valueTime(){return this.time},set valueTime(e){this.time=e}};function y(){return E.seconds<59?(E.seconds++,E.seconds<10&&(z.valueTime=`${N.minutes}:0${E.seconds}`),E.seconds>9&&(z.valueTime=`${N.minutes}:${E.seconds}`)):(E.currentSecond=0,N.minutes++,z.valueTime=`${N.minutes}:00`),localStorage.setItem("time",z.time),localStorage.setItem("seconds",E.seconds),localStorage.setItem("minutes",N.minutes),f.innerHTML=z.time,z.time}function $(){const e=I(c.item);M(e),L.valueMatrix=e,A.itemNumber=0,g.innerHTML=`Moves: ${A.moves}`,w&&(clearInterval(H.timer),w.isTimer=!1),N.currentMinute=0,E.seconds=0,f.innerHTML="0:00",localStorage.setItem("time","0:00"),localStorage.setItem("move",0),localStorage.setItem("saveMatrix",L.matrix)}f.innerHTML=z.time,d.addEventListener("click",$);let H={timer:null,get timeStart(){return this.timer},set timeStart(e){this.timer=e}},w={timer:!1,get isTimer(){return this.timer},set isTimer(e){this.timer=e}};r.addEventListener("click",(e=>{"button-game"===e.target.className&&(w.timer||(H.timeStart=setInterval(y,1e3),w.isTimer=!0))})),h.forEach((e=>{e.textContent[0]===localStorage.getItem("defaultSize")&&e.classList.add("button-size-active")})),v.addEventListener("click",(e=>{const t=e.target;localStorage.setItem("defaultSize",t.textContent[0]),i.node.forEach((e=>{e.remove()})),j.size=Number(localStorage.getItem("defaultSize")*Number(localStorage.getItem("defaultSize"))),i.node=[],s.current=Number(localStorage.getItem("defaultSize"))*Number(localStorage.getItem("defaultSize")),c.item=[],l(s.current),localStorage.setItem("saveMatrix",I(c.item)),L.valueMatrix=I(c.item),M(I(c.item)),i.node[I(c.item).flat().length-1].style.display="none",$(),m(i.item),function(e){h.forEach((e=>{e.classList[1]&&e.classList.remove("button-size-active")})),e.classList.add("button-size-active")}(t),D.sizeCount=20*Number(localStorage.getItem("defaultSize"))})),localStorage.setItem("counterGame",0);let C=Number(localStorage.getItem("counterGame"));function k(){let e=[];for(let t=0;t<11;t++)e.push(localStorage.getItem(`score${t}`));return e}let A={moves:Number(localStorage.getItem("move")),get itemNumber(){return this.moves},set itemNumber(e){this.moves=e}};g.innerHTML=`Moves: ${A.moves}`;let j={size:s.current,get current(){return this.size},set current(e){this.size=e}};function O(e,t){for(let n=0;n<t.length;n++)for(let r=0;r<t[n].length;r++)if(t[n][r]===e)return{x:r,y:n};return null}function G(e,t){const n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return!(1!==n&&1!==r||e.x!==t.x&&e.y!==t.y)}function Y(e,t,n){const o=n[e.y][e.x];n[e.y][e.x]=n[t.y][t.x],n[t.y][t.x]=o,function(e){let t=i.node.map((e=>Number(e.textContent)));const n=e.flat();for(let e=0;e<t.length;e++)if(n[e]!==t[e])return!1;let o=function(){C++;let e=localStorage.getItem("defaultSize"),t=A.itemNumber,n=`Size game: ${e}x${e} Moves: ${t} Time: ${localStorage.getItem("time")}`;return console.log(t),localStorage.setItem(`score${C}`,n),n}();return k(),r.append(x),x.classList.add("won-message-active"),x.textContent="You won!!!",setTimeout((()=>{x.textContent=o}),1500),setTimeout((()=>{x.classList.remove("won-message-active"),x.remove()}),3e3),A.itemNumber=-1,w&&(clearInterval(H.timer),w.isTimer=!1),f.innerHTML="0:00",N.currentMinute=0,E.currentSecond=0,localStorage.setItem("time","0:00"),!0}(L.matrix)&&console.log("You Won")}r.addEventListener("click",(e=>{const t=e.target;if(!t)return;let n=0;n=t.textContent.length>2?Number(t.textContent.slice(-2)):Number(t.textContent);const r=O(n,L.matrix),o=O(j.current,L.matrix);G(r,o)&&(Y(r,o,L.matrix),localStorage.setItem("saveMatrix",L.matrix),M(L.matrix),A.moves++,g.innerHTML=`Moves: ${A.moves}`,localStorage.setItem("move",A.moves),function(){let e=new Audio;e.src="./610d963cb025f135c5ac934b8f827ac4.mp3",e.autoplay=T}())}));let B,D={count:20*Number(localStorage.getItem("defaultSize")),get sizeCount(){return this.count},set sizeCount(e){this.count=e}};u.addEventListener("click",(()=>{let e=0;clearInterval(B),0===e&&(B=setInterval((()=>{!function(e){const t=O(j.current,L.matrix),n=function(e,t,n){const r=[];for(let o=0;o<t.length;o++)for(let s=0;s<t[o].length;s++)G({x:s,y:o},e)&&(n&&n.x===s&&n.y===o||r.push({x:s,y:o}));return r}(t,e,F);Y(t,n[Math.floor(Math.random()*n.length)],e),F=t}(L.matrix),M(L.matrix),e+=1,e>=D.count&&clearInterval(B)}),50))}));let F=null,P=!1;const R=document.createElement("div");R.classList="button-score",R.innerHTML="Score",setTimeout((()=>{n.append(R)}),0);const W=document.createElement("div");function X(){let e="";k().forEach(((t,n)=>{null!==t&&(e+=`${n} ${t} <br>`)})),P?(W.classList.remove("score-table-close"),R.classList.add("button-score-open"),P=!1,W.innerHTML="",W.insertAdjacentHTML("afterbegin",e)):(W.classList.add("score-table-close"),R.classList.remove("button-score-open"),P=!0)}W.classList="score-table",setTimeout((()=>{r.append(W)}),0),R.addEventListener("click",(()=>{X()})),X()}();